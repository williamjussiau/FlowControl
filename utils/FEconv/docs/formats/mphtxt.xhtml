<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type"  content="text/html; charset=UTF-8" />
  <title>Feconv: Finite Element conversor</title>
  <link href="../css/structure.css" rel="stylesheet" type="text/css" />
  <link href="../css/breadcrumbs.css" rel="stylesheet" type="text/css" />
  <link href="../css/menu.css" rel="stylesheet" type="text/css" />
  <link href="../css/topics.css" rel="stylesheet" type="text/css" />

  <script type="text/javascript" src="../js/btn.js"></script>
  <script type="text/javascript" src="../js/enlargeit.js"></script>
  <script type="text/javascript">
        enl_ani = 0;
        enl_brdsize = 30;
        enl_shadow = 1;
        enl_center = 1;
        enl_dark = 1;
        enl_darkprct = 30;
        enl_drgdrop = 0;
        enl_keynav = 1;
        enl_wheelnav = 0;
        enl_titlebar=0;
  </script>
  <script type="text/javascript" src="../js/jquery-2.1.1.min.js"></script>
  <script>
    $(document).ready(function(){
      $("#art").animate({opacity:'0'},0);
      $("#art").animate({opacity:'1'},"slow");
    });
  </script>

</head>

<body onload="showbtn()">

  <header>
    <img float="left" align="left" src="../images/gear.png"/>
    <img float="right" align="right" src="../images/feconv.png"/>
  </header>

  <nav class="breadcrumbs">
    <p><em><a href="../index.html">Home</a>><a href="../formats.xhtml">Formats</a>><a href="mphtxt.xhtml">MPHTXT</a></em></p>
  </nav>

  <nav class="menu mnu">
    <h2 align="center" >Home</h2>
    <ul>
      <li><a href="../description.xhtml">Summary</a></li>
      <li><a href="../install.xhtml">Install</a></li>
      <li><a href="../formats.xhtml">Formats</a></li>
      <li><a href="../options.xhtml">Options</a></li>
      <li><a href="../examples.xhtml">Examples</a></li>
      <li><a href="../underconstruction.xhtml">How to contribute</a></li>
      <li><a href="../refguide.xhtml">Reference guide</a></li>
    </ul>
  </nav>

  <aside class="mnu">
    <nav class="menu mnu">
      <h2 align="center" >Users</h2>
      <ul>
        <li><a href="../users/login.xhtml">Login</a></li>
        <li><a href="../users/survey.xhtml">Survey</a></li>
      </ul>
    </nav>
  </aside>

  <section>

    <!-- Local section navigation menu -->
    <nav id="top" class="topics">
      <ul>
        <li><a href="#desc">Description</a></li>
        <li><a href="#feat">Features supported by feconv</a>
          <ul>
            <li><a href="#fetypes">Finite element types</a></li><br/>
            <li><a href="#vord">Local node ordering</a></li><br/>
          </ul>
        </li>
        <li><a href="#fstruc">File structure</a></li>
      </ul>
    </nav>

    <article id="art"> 
    <h2 id="desc"><input type="button" onclick="return toggleMe(this,'div1')" class="btn" value="-"/>  1. Description</h2>

    <div id="div1">

    <p>The Comsol Model File MPHTXT is a text based format developed by <a href="http://www.comsol.com">Comsol</a> and used by the software <a href="http://www.comsol.com/comsol-multiphysics">Comsol Multiphysics</a>, simulation tool for electrical, mechanical, fluid flow, and chemical applications. </p>

    <p>The main features of this format are:</p>
    <ul>
      <li>It can store several serializable objects like meshes, geometries, etc.</li>
      <li>It can store piecewise meshes, each piece is called record, and it is a separate part of the mesh with its own numbering.</li>
      <li>It can save hybrid meshes, that is, meshes that contain a several types of finite elements.</li>
      <li>It can store parameter dependant data at nodes or on elements.</li>
      <li>The global indexing of nodes, edges, faces and elements are defined by integers. </li>
      <li>The vertex coordinates and parameter values are defined by floats of double precision.</li>
    </ul>

    <div class="back"><a href="#top">Back to top</a></div>
    </div>

    <h2 id="feat"><input type="button" onclick="return toggleMe(this,'div2')" class="btn" value="-"/> 2. Features supported by feconv</h2>

    <div id="div2">
    <p>FEconv only supports MPHTXT mesh files with version 0.1 containing serializable mesh objects. Moreover, the version of the serializable object Mesh must be 2 or 4.</p>

    <h3 id="fetypes"><input type="button" onclick="return toggleMe(this,'div3')" class="btn" value="-"/>  Finite element types</h3>

    <div id="div3">
    <p>The MPHTXT format describes a lot of different types of finite elements. In the following table you can see the finite elements allowed by FEconv and its <a href="pmh.xhtml#fe">description in PMH</a>.</p>

    <p>
    <div align="center">
    <table class="tb" width="80%">
      <thead>
        <tr> <th width="30%">MPHTXT descriptor</th> <th align="left" width="30%">MPHTXT name</th>  <th align="left" width="30%">FE type</th> </tr>
      </thead>
      <tbody>
        <tr><td>edg</td> <td align="left">Edge element</td> <td align="left">Edge Lagrange P1</td> </tr>
        <tr><td>tri</td> <td align="left">Triangular element</td> <td align="left">Triangle Lagrange P1</td> </tr>
        <tr><td>quad</td> <td align="left">Quadrilateral element</td> <td align="left">Quadrilateral Lagrange P1</td> </tr>
        <tr><td>tet</td> <td align="left">Tetrahedral element</td> <td align="left">Tetrahedron Lagrange P1</td> </tr>
        <tr><td>prism</td> <td align="left">Prism element</td> <td align="left">Pentahedron Lagrange P1</td> </tr>
        <tr><td>hex</td> <td align="left">Hexahedal element</td> <td align="left">Hexahedron Lagrange P1</td></tr>
        <tr><td>edg2</td> <td align="left">Edge element (P2)</td> <td align="left">Edge Lagrange P2</td> </tr>
        <tr><td>tri2</td> <td align="left">Triangular element (P2)</td> <td align="left">Triangle Lagrange P2</td> </tr>
        <tr><td>quad2</td> <td align="left">Quadrilateral element (P2*)</td> <td align="left">Quadrilateral Lagrange P2</td> </tr>
        <tr><td>tet2</td> <td align="left">Tetrahedral element (P2)</td> <td align="left">Tetrahedron Lagrange P2</td> </tr>
        <tr><td>hex2</td> <td align="left">Hexahedral element (P2*)</td> <td align="left">Hexahedron Lagrange P2</td> </tr>
      </tbody>
    </table>
    </div>
    </p>

    <p>* Note that second order quadrangles and hexahedrons contain nodes on the barycenter of each face and element. FEconv translates this kind of element to a Lagrange P2 element ignoring the nodes on the barycenter when reading MPHTXT files. Feconv calculate this nodes during MPHTXT file writing.</p>

    <div class="back"><a href="#top">Back to top</a></div>
    </div>    


    <h3 id="vord"><input type="button" onclick="return toggleMe(this,'div6')" class="btn" value="-"/>  Local order of nodes</h3>

    <div id="div6">

    <p>The local order of nodes in each element respect the following rules:</p>

    <p align="center"> 

      <div id="fig-1" align="center"> <table class="tb2" width="80%"> <tbody>
        <tr>
          <td width="30%">
            <p>a)</p>
            <img  src="../images/mph/edgep1_ord.png" width="30%" onclick="enlarge(this);" longdesc="../images/mph/edgep1_ord.png"/>
            <p><span class="caption" align="center"> Edge Lagrange P1.</span></p>
          </td>
          <td width="30%">
            <p>b)</p>
            <img src="../images/mph/triap1_ord.png" width="65%" onclick="enlarge(this);" longdesc="../images/mph/triap1_ord.png"/> 
            <p><span class="caption" align="center"> Triangle Lagrange P1.</span></p>
          </td>
          <td width="30%">
            <p>c)</p>
            <img src="../images/mph/quadp1_ord.png" width="50%" onclick="enlarge(this);" longdesc="../images/mph/quadp1_ord.png"/>
            <p><span class="caption" align="center"> Quadrilateral Lagrange P1.</span></p>
          </td>
        </tr>
        <tr>
          <td width="30%">
            <p>d)</p>
            <img src="../images/mph/tetrap1_ord.png" width="50%" onclick="enlarge(this);" longdesc="../images/mph/tetrap1_ord.png"/>
            <p><span class="caption" align="center"> Tetrahedron Lagrange P1.</span></p>
          </td>
          <td>
            <p>e)</p>
            <img src="../images/mph/hexap1_ord.png" width="60%" onclick="enlarge(this);" longdesc="../images/mph/hexap1_ord.png"/>
            <p><span class="caption" align="center"> Hexahedron Lagrange P1.</span></p>
          </td>
          <td>
            <p>f)</p>
            <img src="../images/mph/pentap1_ord.png" width="50%" onclick="enlarge(this);" longdesc="../images/mph/pentap1_ord.png"/>
            <p><span class="caption" align="center"> Pentahedron Lagrange P1.</span></p>
          </td>
        </tr>
        <tr>
          <td>
            <p>g)</p>
            <img src="../images/mph/edgep2_ord.png" width="30%" onclick="enlarge(this);" longdesc="../images/mph/edgep2_ord.png"/>
            <p><span class="caption" align="center"> Edge Lagrange P2.</span></p>
          </td>
          <td>
            <p>h)</p>
            <img src="../images/mph/triap2_ord.png" width="65%" onclick="enlarge(this);" longdesc="../images/mph/triap2_ord.png"/>
            <p><span class="caption" align="center"> Triangle Lagrange P2.</span></p>
          </td>
          <td>
            <p>i)</p>
            <img src="../images/mph/quadp2_ord.png" width="50%" onclick="enlarge(this);" longdesc="../images/mph/quadp2_ord.png"/>
            <p><span class="caption" align="center"> Quadrilateral P2*.</span></p>
          </td>
        </tr>
        <tr>
          <td>
            <p>j)</p>
            <img src="../images/mph/tetrap2_ord.png" width="50%" onclick="enlarge(this);" longdesc="../images/mph/tetrap2_ord.png"/>
            <p><span class="caption" align="center"> Tetrahedron Lagrange P2.</span></p>
          </td>
          <td>
            <p>k)</p>
            <img src="../images/mph/hexap2_ord.png" width="60%" onclick="enlarge(this);" longdesc="../images/mph/hexap2_ord.png"/>
            <p><span class="caption" align="center"> Hexahedron P2*.</span></p>
          </td>
        </tr>
      </tbody> </table>
      <table class="tb" width="80%"> <tbody>
        <tr><span class="caption"><p><strong>Figure 1:</strong> Local order of nodes on MPH elements.</p></span></tr>
      </tbody> </table> </div>
    </p>

    <div class="back"><a href="#top">Back to top</a></div>

    </div>
    </div>

    <h2 id="fstruc"><input type="button" onclick="return toggleMe(this,'div7')" class="btn" value="-"/>  3. File structure</h2>

    <div id="div7">
    <p>The <a href="http://www.lmn.pub.ro/~daniel/ElectromagneticModelingDoctoral/Books/COMSOL4.3/mph/COMSOLMultiphysicsReferenceGuide.pdf">MPHTXT file format</a> has a global version number. The first entry in each file is the file format, indicating the major and minor file version by two integers.</p>
    <p>After the file version, the file contains a number of tags, stored as strings wich gives an identification for each record stored in the file.</p>
    <p>Then the number of types and, optionally, the serializable object identifiers of this types.</p>
    <p>Finally, MPHTXT file contains objects with the serialized data in the file. The data contained in each object are space dimension, coordinates, element types and connectivities among others. You can see a summary of this data in <a href="#fig-4">Figure 4</a>, obtained from the COMSOL manual.</p>
    <p>By convention, MPHTXT files store strings preceding them by their length. Everything following a # is ignored.</p>
    <p id="fig-4" align="center">
    <img src="../images/mph/mphvars.png" width="50%"/>
    <span class="caption"><p><strong>Figure 4:</strong> Data contained in MPH objects.</p></span>
    </p>

    <div class="back"><a href="#top">Back to top</a></div>
    </div>

    </article>

  </section>

  <footer>
    <p>&copy; 2018 <a href="http://www.usc.es">Universidade de Santiago de Compostela</a></p> 
  </footer>

</body>
</html>

